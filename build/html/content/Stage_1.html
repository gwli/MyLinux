<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>基础篇 &mdash; My Linux 0.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="My Linux 0.3 documentation" href="../index.html" />
    <link rel="next" title="内核篇" href="Stage_2.html" />
    <link rel="prev" title="框架" href="../Target.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Stage_2.html" title="内核篇"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../Target.html" title="框架"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">My Linux 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>基础篇<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="linux">
<h2>Linux 的目录结构<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Linux 树状目录结构表</li>
</ol>
<div class="align-center figure" id="id37">
<img alt="alternate text" src="../_images/linux_file_tree.png" />
<p class="caption"><span class="caption-text">Linux 树状目录结构表</span></p>
</div>
<ol class="arabic simple">
<li>/bin： 用来存储用户命令和可执行程序</li>
<li>/sbin: 包含一些主要供超级用户用的可执行程序；</li>
<li>/usr: 安装主要的系统文件和软件</li>
<li>/home: 存放各用户的主目录。</li>
<li>/etc: 系统设置文件</li>
<li>/dev: 设备文件，主要是各种驱动；</li>
<li>/proc: Linux 内核的接口，可以通过它在运行时获取、改变系统内核的许多参数；</li>
<li>/mnt: 外挂设备的挂接点；</li>
<li>/root: 超级用户的目录；</li>
<li>/boot 和 /initrd: 系统启动用的文件；</li>
<li>/lib: 库文件；</li>
<li>/tmp: 用于创建临时文件或目录；</li>
<li>/usr/include/: 头文件的位置；</li>
<li>/src: 内核和软件的源代码的位置；</li>
<li>/local: 安装外来软件的地方；</li>
<li>/sudo: 使得普通用户可以得到超级用户权利。</li>
</ol>
<div class="section" id="id2">
<h3>最基本目录<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><code class="file docutils literal"><span class="pre">/bin,/dev,/etc,/lib,/proc,/sbin,/usr</span></code></p>
<p>linux 的目录结构采用是Array register 制。
标准的流程就是把配置文件放在 <code class="file docutils literal"><span class="pre">/etc/</span></code> 下面。so,ko 都是放在 <code class="file docutils literal"><span class="pre">/lib/</span></code>
而其log 等等放在 <code class="file docutils literal"><span class="pre">/var/log</span></code> 里面。  <em>var</em> 的意思本来就是经常读写，变动的意思。</p>
</div>
<div class="section" id="var-log">
<h3>/var/log<a class="headerlink" href="#var-log" title="Permalink to this headline">¶</a></h3>
<p>log是非常重要的东东，出了问题第一个要看那就是log了。 并且 linux 默认都有 X.org.0.log &#8211; X.org.6.log 默认是0 是最新的，也就是保留最近6次的log. 这个是由logrotate 机制来提供的。</p>
<p>例如syslog以及syslog-ng 等等的应用会自动实现这些，同样在android上也有logcat这样东东是同样的道理。</p>
<p><a class="reference external" href="http://blog.chinaunix.net/uid-26569496-id-3199434.html">http://blog.chinaunix.net/uid-26569496-id-3199434.html</a></p>
<div class="section" id="id3">
<h4>Linux 基本命令<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id4">
<h5>命令补全<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<p>bash 的命令补全功能，不只是简单的字符串补全，而是根据上下文来补全。这些都的实现都在  /usr/share/bash-complete 中。 如果没有可以安装 apt-get install bash-complete</p>
<p>&lt;a href=&#8221;<a class="reference external" href="https://asciinema.org/a/LUcAqGRm2vJc8sQYUlhO4fIef?autoplay=1">https://asciinema.org/a/LUcAqGRm2vJc8sQYUlhO4fIef?autoplay=1</a>&#8221; target=&#8221;_blank&#8221;&gt;&lt;img src=&#8221;<a class="reference external" href="https://asciinema.org/a/LUcAqGRm2vJc8sQYUlhO4fIef.png">https://asciinema.org/a/LUcAqGRm2vJc8sQYUlhO4fIef.png</a>&#8221; width=&#8221;835&#8221;/&gt;&lt;/a&gt;</p>
<p>service 命令，它列出系统中有 services .</p>
</div>
<div class="section" id="id5">
<h5>关机操作<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<ol class="arabic">
<li><p class="first">关机:</p>
<div class="highlight-bash"><div class="highlight"><pre>/sbin/halt <span class="c1">#杀掉所有进程，只是关掉CPU</span>
/sbin/poweroff <span class="c1">#除了halt,关掉主板的各种设备，最后关电</span>
shutdown -h now  <span class="c1">#可以执行额外的脚本</span>
init 0
</pre></div>
</div>
</li>
<li><p class="first">重启： /sbin/reboot</p>
</li>
</ol>
<p>修改密码：password</p>
</div>
<div class="section" id="id6">
<h5>目录操作<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>查看当前目录：pwd</li>
<li>返回目录：cd</li>
<li>返回上一层目录： cd ..</li>
<li>当前目录：cd .</li>
</ol>
</div>
<div class="section" id="id7">
<h5>文件操作<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>创建目录: mkdir</li>
<li>删除目录: rmdir</li>
<li>打开文件(读写文件): vim</li>
<li>关闭文件:wq</li>
<li>移动文件: mv</li>
<li>删除文件: rm</li>
<li>复制文件或目录: cp</li>
<li>在文件间建立连接: ln -s（软连接）</li>
<li>查找文件: find</li>
<li>基于内容查找： grep</li>
</ol>
</div>
<div class="section" id="id8">
<h5>其它<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>查看网络设备: ifconfig</li>
<li>安装程序包: sudo apt-get</li>
<li>查看任务管理器进程: ps</li>
<li>查看命令历史: history</li>
<li>产看帮助： man，help</li>
</ol>
</div>
<div class="section" id="id9">
<h5>解压<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ext</th>
<th class="head">cmd</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tar.gz</td>
<td>tar -xzvf  abc.tar.gz</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>tar.bz2</td>
<td>tar -xjvf  abc.tar.bz2</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>.zip</td>
<td>unzip abc.zip</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>.rar</td>
<td>unrar x abc.rar</td>
<td>apt-get install unrar</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tar">
<h5>tar 到指定的目录<a class="headerlink" href="#tar" title="Permalink to this headline">¶</a></h5>
<p><strong class="command">tar -xzvf abc.tgz -C Dest</strong></p>
<p><code class="docutils literal"><span class="pre">python</span> <span class="pre">tarfile</span></code> 以及 <code class="docutils literal"><span class="pre">python</span> <span class="pre">zipfile</span></code></p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Xz">xz</a></p>
<p>当然也可以用tar 来代替 cp,在大量小文件的时候，可以加快速度。相当于先打包再传输。
<strong class="command">tar -cvf - /etc |tar -xvf -</strong> 就是这样的目的。</p>
</div>
</div>
</div>
<div class="section" id="ar">
<h3>ar<a class="headerlink" href="#ar" title="Permalink to this headline">¶</a></h3>
<p>同tar是一类东东，现在只剩下用来打包库了，现在ld 好像只认这种ar这种格式。 如果你想重新打包。
只要 ar -x xxx.a  &amp;&amp; ar -c libaz.a XX.o 就可以了。
<a class="reference external" href="https://www.quora.com/Whats-the-difference-between-ar-and-tar">https://www.quora.com/Whats-the-difference-between-ar-and-tar</a></p>
<p>正则表达式，是不需要转义的， :command:` grep -E` 或者 <strong class="command">egrep</strong>.
对于输出的控制很灵活，可以计数，可以高亮，以及只显文件名，以及支持与或非。
对于或的支持 可以用  <strong class="command">grep -F</strong> 或者 <strong class="command">fgrep</strong> 后接一个文件列表
只要直接pattern列表，每一行一个，这些pattern的关系是 any(patterns)的关系。
同时正则表达式也是支持的</p>
<p><strong class="command">grep -lincrE &quot;localhost|127.0.0.1&quot; ./* |grep -vE &quot;tutorial|machine&quot;</strong></p>
<p>imagemaic import 命令。</p>
<p><a class="reference external" href="http://www.cnblogs.com/allenblogs/archive/2011/05/19/2051136.html">http://www.cnblogs.com/allenblogs/archive/2011/05/19/2051136.html</a></p>
<p>这条命令用在，你退出session,命令继续。 并且自动的重定向输出。</p>
<p>检查是否有文件分区使用率(Use%)过高(比如超过90%)</p>
<p><strong class="command">df -h |grep -vE &quot;tmpfs|udev&quot;</strong></p>
<p>如发现某个分区空间接近用尽,用以下命令找出占用空间最多的文件或目录：</p>
<p><strong class="command">du -csh /var/lib/state/*</strong> 或者排序
<strong class="command">du -cks * |sort -rn| head -n 10</strong></p>
<p>当发现硬件有空间，但是系统却报已经满了。
<strong class="command">df -i</strong> 可以来看系统的inode是不是满了。</p>
<p>主要有两个wget与curl, 类似curl功能更强，支持功能更多，wget 强的主要一点，那就是 recursively download. 并且都支持管道，但是curl支持更多一些。
例如 下载下来直接执行 <strong class="command">wget -O - |sh</strong> 。 如何编程使用的话，用curl可能更加方便一些，毕竟后面一个跨平台的库在那里支持着。</p>
<div class="highlight-bash"><div class="highlight"><pre>/etc/issue
/etc/debian_version
/etc/readhat-release
/etc/os-release
/etc/lsb-release
</pre></div>
</div>
<p>利用特征文件 <code class="file docutils literal"><span class="pre">/etc/issue</span></code> 或者 <code class="file docutils literal"><span class="pre">/etc/redhat-release</span></code> 或者 <code class="file docutils literal"><span class="pre">/etc/debian_version</span></code></p>
<p>或者直接 <strong class="command">cat /etc/*-release</strong> 就可以看到了。</p>
<p><a class="reference external" href="http://www.vpsee.com/2011/01/how-to-detect-if-a-linux-system-running-on-a-virtual-machine/">http://www.vpsee.com/2011/01/how-to-detect-if-a-linux-system-running-on-a-virtual-machine/</a></p>
<p>主要是通过 <code class="file docutils literal"><span class="pre">/proc/vz</span>&nbsp; <span class="pre">/proc/xen/</span></code> 等文件来做的，一般这些地址会体现系统环境的。</p>
<p>linux专门一条:command:<cite>rename</cite> 指令。例如 我要把  <em>.txt</em> 变成 <em>.rst</em>
<strong class="command">rename 's/.txt/.rst/ XX.txt</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>行</td>
<td>sed</td>
<td>grep</td>
<td>head</td>
<td>tail</td>
</tr>
<tr class="row-even"><td>例</td>
<td>awk</td>
<td>column</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>在文件添加一行，一个方法那就是用vim就可以了。
如果只是简单的行尾，那就是&gt;&gt;就搞定了。</p>
<p>格式化字符串   +% 例如 <strong class="command">date +%Y/%m/%d</strong> ， 另外相得到
上周一是几号  <strong class="command">date -d 'last monday</strong> .</p>
<p><strong class="command">crontab -l</strong> 列出当前所有的。
<strong class="command">crontab -e</strong> 编辑当前cronjob。</p>
<p><a class="reference external" href="http://stackoverflow.com/questions/18919151/crontab-day-of-the-week-syntax">http://stackoverflow.com/questions/18919151/crontab-day-of-the-week-syntax</a></p>
<p><strong class="command">minicom -D /dev/ttyUSB0</strong>
<strong class="command">minicom -C log.txt -D /dev/ttypUSB0</strong> 保存log</p>
<p><strong class="command">ctrl+A</strong> 来进入控制台</p>
<p><a class="reference external" href="http://www.tldp.org/HOWTO/Text-Terminal-HOWTO-11.html">Text-Terminal-HOWTO-11.html</a>  为什么需要flow control,就是为解决速度不匹配的原因，并且解释了原理。</p>
<p>不同平台下，会有不同的名字，
在ubuntu 下那就是  build-essential
在centos 下 那就是 Development Tools</p>
<p><strong class="command">pkg-config</strong> 用来查看这个系统所安装库的，编译选项，以及所在的位置。而不需要人为去记住每一个库的编译选项。 在make 文件中常见的那就是</p>
<p>indent, C语言的格式美化工具。</p>
<p><a class="reference external" href="https://www.kernel.org/doc/Documentation/CodingStyle">https://www.kernel.org/doc/Documentation/CodingStyle</a>
kernel-devel 包</p>
<p><strong class="command">resize2fs -F -f -p /dev/sda1 -M</strong> 最小化。</p>
<p>有各种同步， sync是直接把cache中内容写回到硬盘，isync,dsync则是mail box同步，而zsync 则提供的是部分下载，文件下载到了一半，只需要同步一部分，相当于patch的功能，而rsync则是文件的同步。</p>
<div class="highlight-bash"><div class="highlight"><pre>ssh-keygen
ssh-copy-id user@remote_host
rsync  user@remote_host:~/XXXX  Local_path/XXXX
</pre></div>
</div>
<p>这里有好几种做法，一种就是直接加入sudo. <strong class="command">sudo adduser &lt;username&gt; sudo</strong></p>
<p>或者直接在 /etc/sudoers.</p>
<div class="highlight-bash"><div class="highlight"><pre>%sudo <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> ALL
</pre></div>
</div>
<ol class="arabic">
<li><p class="first"><strong class="command">usermod -a -G sudo &lt;username&gt;</strong></p>
</li>
<li><p class="first"><strong class="command">useradd -G admin -a &lt;username&gt;</strong></p>
</li>
<li><p class="first">删除0字节文件 <strong class="command">find -type f -size 0 -xec rm -fr {} ;</strong></p>
</li>
<li><p class="first">查看进程，按内存从大到小排列  <strong class="command">ps -e -o &quot;%C :%p :%z :%a&quot; |sort -k5 -nr</strong></p>
</li>
<li><p class="first">按CPU利用率从大到小排列 <strong class="command">ps -e -o &quot;%C :%p :%z :%a&quot; |sort -nr</strong></p>
</li>
<li><p class="first">打印出cache里的url  <strong class="command">grep -r -a jpg /data/cache/* |string |grep &quot;http:&quot; |awk -F'http:' '{print &quot;http:&quot;$2;}</strong></p>
</li>
<li><p class="first">查看http的并发请求及其TCP连接状态  <strong class="command">netstat -n|awk '/tcp/{++$[$NF]} END {for( a in S) print a,S[a]}'</strong></p>
</li>
<li><p class="first">这个文里Root的一行，匹配Root一行，把no,yes. <strong class="command">sed -i '/Root/s/no/yes' /etc/ssh/sshd_config</strong></p>
</li>
<li><p class="first">如何杀掉mysql进程 <strong class="command">ps aux |grep mysql |grep -v grep |awk `{print $2}' |xargs kill -9</strong>,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">kill</span> -TERM mysqld
<span class="nb">kill</span> -9 <span class="sb">`</span>cat /usr/local/apache2/logs/httpd.pid<span class="sb">`</span>
</pre></div>
</div>
</li>
</ol>
<p>linux下的习惯把pid存入 xxx.pid文件。
#. 利用 HEREdoc</p>
<blockquote>
<div>cat &lt;&lt;EOF
+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+
| === Welcome to <cite>whoami</cite> |
+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+</div></blockquote>
<p>EOF</p>
<ol class="arabic">
<li><p class="first">for 来建立连接</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /usr/local/mysql/bin
<span class="k">for</span> i in *
   <span class="k">do</span> ln /usr/locla/myql/bin/$i /usr/bin/$i
<span class="k">done</span>
</pre></div>
</div>
</li>
<li><p class="first">内存的大小 :command;`free -m | grep &#8220;Mem&#8221; | awk &#8216;{print $2}&#8217;`</p>
</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="m">20</span> swap 空间# free
检查swap used 值是否过高如果swap used 值过高，进一步检查swap 动作是否频繁：
<span class="c1"># vmstat 1 5</span>
观察si 和so 值是否较大
<span class="m">21</span> 磁盘空间# df -h
检查是否有分区使用率<span class="o">(</span>Use%<span class="o">)</span>过高<span class="o">(</span>比如超过90%<span class="o">)</span> 如发现某个分区空间接近用尽，可以进入该分区的挂载
点，用以下命令找出占用空间最多的文件或目录：
<span class="c1"># du -cks * | sort -rn | head -n 10</span>
<span class="m">22</span> 磁盘I/O 负载# iostat -x <span class="m">1</span> 2
检查I/O 使用率<span class="o">(</span>%util<span class="o">)</span>是否超过100%
<span class="m">23</span> 网络负载# sar -n DEV
检查网络流量<span class="o">(</span>rxbyt/s, txbyt/s<span class="o">)</span>是否过高
<span class="m">24</span> 网络错误# netstat -i
检查是否有网络错误<span class="o">(</span>drop fifo colls carrier<span class="o">)</span> 也可以用命令：# cat /proc/net/dev
<span class="m">25</span> 网络连接数目# netstat -an <span class="p">|</span> grep -E “<span class="o">(</span>tcp<span class="o">)</span>” <span class="p">|</span> cut -c 68- <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> sort -n
<span class="m">26</span> 进程总数# ps aux <span class="p">|</span> wc -l
检查进程个数是否正常<span class="o">(</span>比如超过250<span class="o">)</span>
<span class="m">27</span> 可运行进程数目# vmwtat <span class="m">1</span> 5
列给出的是可运行进程的数目，检查其是否超过系统逻辑CPU 的4 倍
<span class="m">28</span> 进程# top -id 1
观察是否有异常进程出现
<span class="m">29</span> 网络状态检查DNS, 网关等是否可以正常连通
<span class="m">30</span> 用户# who <span class="p">|</span> wc -l
检查登录用户是否过多<span class="o">(</span>比如超过50 个<span class="o">)</span> 也可以用命令：# uptime
<span class="m">31</span> 系统日志# cat /var/log/rf logview/*errors
检查是否有异常错误记录也可以搜寻一些异常关键字，例如：
<span class="c1"># grep -i error /var/log/messages</span>
<span class="c1"># grep -i fail /var/log/messages</span>
<span class="m">32</span> 核心日志# dmesg
检查是否有异常错误记录
<span class="m">33</span> 系统时间# date
检查系统时间是否正确
<span class="m">34</span> 打开文件数目# lsof <span class="p">|</span> wc -l
检查打开文件总数是否过多
<span class="m">35</span> 日志# logwatch –print 配置/etc/log.d/logwatch.conf ，将Mailto 设置为自己的email 地址，
启动mail 服务<span class="o">(</span>sendmail 或者postfix<span class="o">)</span>，这样就可以每天收到日志报告了。
缺省logwatch 只报告昨天的日志，可以用# logwatch –print –range all 获得所有的日志分析结果。
可以用# logwatch –print –detail high 获得更具体的日志分析结果<span class="o">(</span>而不仅仅是出错日志<span class="o">)</span>。
36.杀掉80 端口相关的进程
lsof -i :80<span class="p">|</span>grep -v <span class="s2">&quot;PID&quot;</span><span class="p">|</span>awk <span class="s1">&#39;{print &quot;kill -9&quot;,$2}&#39;</span><span class="p">|</span>sh
37.清除僵死进程。
ps -eal <span class="p">|</span> awk <span class="s1">&#39;{ if ($2 == &quot;Z&quot;) {print $4}}&#39;</span> <span class="p">|</span> <span class="nb">kill</span> -9
38.tcpdump 抓包，用来防止80 端口被人攻击时可以分析数据
<span class="c1"># tcpdump -c 10000 -i eth0 -n dst port 80 &gt; /root/pkts</span>
39.然后检查IP 的重复数并从小到大排序注意<span class="s2">&quot;-t\ +0&quot;</span> 中间是两个空格
<span class="c1"># less pkts | awk {&#39;printf $3&quot;\n&quot;&#39;} | cut -d. -f 1-4 | sort | uniq -c | awk {&#39;printf $1&quot; &quot;$2&quot;\n&quot;&#39;} | sort -</span>
n -t<span class="se">\ </span>+0
40.查看有多少个活动的php-cgi 进程
netstat -anp <span class="p">|</span> grep php-cgi <span class="p">|</span> grep tcp <span class="p">|</span> wc -l
chkconfig --list <span class="p">|</span> awk <span class="s1">&#39;{if ($5==&quot;3:on&quot;) print $1}&#39;</span>
41.kudzu 查看网卡型号
kudzu --probe --class<span class="o">=</span>network
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>常用的正则表式<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>匹配中文字符的正则表达式： [u4e00-u9fa5]</li>
<li>评注：匹配中文还真是个头疼的事，有了这个表达式就好办了</li>
<li>匹配双字节字符(包括汉字在内)：[x00-xff]</li>
<li>评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII 字符计1）</li>
<li>匹配空白行的正则表达式： ns*r</li>
<li>评注：可以用来删除空白行</li>
<li>匹配HTML 标记的正则表达式：&lt;(S*?)[&gt;]*&gt;.*?&lt;/1&gt;|&lt;.*? /&gt;</li>
<li>评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力</li>
<li>匹配首尾空白字符的正则表达式： s*|s*$</li>
<li>评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式</li>
<li>匹配Email 地址的正则表达式：w+([-+.]w+)*&#64;w+([-.]w+)*.w+([-.]w+)*</li>
<li>评注：表单验证时很实用</li>
<li>匹配网址URL 的正则表达式：[a-zA-z]+:/ /[s]*</li>
<li>评注：网上流传的版本功能很有限，上面这个基本可以满足需求</li>
<li>匹配帐号是否合法(字母开头，允许5-16 字节，允许字母数字下划线)：[a-zA-Z][<a href="#id38"><span class="problematic" id="id39">a-zA-Z0-9_</span></a>]{4,15}$</li>
<li>评注：表单验证时很实用</li>
<li>匹配国内电话号码： d{3}-d{8}|d{4}-d{7}</li>
<li>评注：匹配形式如0511-4405222 或021-87888822</li>
<li>匹配腾讯QQ 号：[1-9][0-9]{4,}</li>
<li>评注：腾讯QQ 号从10000 开始</li>
<li>匹配中国邮政编码： [1-9]d{5}(?!d)</li>
<li>评注：中国邮政编码为6 位数字</li>
<li>匹配身份证： d{15}|d{18}</li>
<li>评注：中国的身份证为15 位或18 位</li>
<li>匹配ip 地址：d+.d+.d+.d+</li>
<li>评注：提取ip 地址时有用</li>
<li>匹配特定数字：</li>
<li>[1-9]d*$ 匹配正整数</li>
<li>-[1-9]d*$ 匹配负整数</li>
<li>-?[1-9]d*$ 匹配整数</li>
<li>[1-9]d*|0$ 匹配非负整数（正整数+ 0）</li>
<li>-[1-9]d*|0$ 匹配非正整数（负整数+ 0）</li>
<li>[1-9]d*.d*|0.d*[1-9]d*$ 匹配正浮点数</li>
<li>-([1-9]d*.d*|0.d*[1-9]d*)$ 匹配负浮点数</li>
<li>-?([1-9]d*.d*|0.d*[1-9]d*|0?.0+|0)$ 匹配浮点数</li>
<li>[1-9]d*.d*|0.d*[1-9]d*|0?.0+|0$ 匹配非负浮点数（正浮点数+ 0）</li>
<li>(-([1-9]d*.d*|0.d*[1-9]d*))|0?.0+|0$ 匹配非正浮点数（负浮点数+ 0）</li>
<li>评注：处理大量数据时有用，具体应用时注意修正</li>
<li>匹配特定字符串：</li>
<li>[A-Za-z]+$ 匹配由26 个英文字母组成的字符串</li>
<li>[A-Z]+$ 匹配由26 个英文字母的大写组成的字符串</li>
<li>[a-z]+$ 匹配由26 个英文字母的小写组成的字符串</li>
<li>[A-Za-z0-9]+$ 匹配由数字和26 个英文字母组成的字符串</li>
<li>w+$ 匹配由数字、26 个英文字母或者下划线组成的字符串</li>
<li>评注：最基本也是最常用的一些表达式</li>
</ol>
</div>
<div class="section" id="coreutils">
<h3>coreutils<a class="headerlink" href="#coreutils" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.gnu.org/software/coreutils/manual/coreutils.html">https://www.gnu.org/software/coreutils/manual/coreutils.html</a></p>
<p>最全命令手册，非常有用 timeout,</p>
</div>
<div class="section" id="notification">
<h3>notification<a class="headerlink" href="#notification" title="Permalink to this headline">¶</a></h3>
<p>当执行一个长时间的事情的时候，能不能自动通知，有几种方式，</p>
<ol class="arabic simple">
<li>声音， beep,aplay,pacmd,espeaker.</li>
<li>email, 可以通过邮件，自动发邮件</li>
<li>动画， 例如利用xlock,xeve,xbotton等直接在屏幕上显示动画。</li>
<li>可以用 <a class="reference external" href="https://github.com/gorakhargosh/watchdog">watchdog</a> 来添加一些监控</li>
</ol>
</div>
<div class="section" id="fortune">
<h3>fortune<a class="headerlink" href="#fortune" title="Permalink to this headline">¶</a></h3>
<p>可以随机产生诗句。</p>
</div>
<div class="section" id="udevadm">
<h3>udevadm<a class="headerlink" href="#udevadm" title="Permalink to this headline">¶</a></h3>
<p>查看硬件的变动  <strong class="command">udevadm monitor</strong>.</p>
</div>
<div class="section" id="pdfgrep">
<h3>pdfgrep<a class="headerlink" href="#pdfgrep" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pdfgrep.org/">https://pdfgrep.org/</a></p>
</div>
<div class="section" id="googler">
<h3>googler<a class="headerlink" href="#googler" title="Permalink to this headline">¶</a></h3>
<p>命令行google工具。</p>
</div>
<div class="section" id="how2">
<h3>How2<a class="headerlink" href="#how2" title="Permalink to this headline">¶</a></h3>
<p>命令行的stackoverflow工具。
<a class="reference external" href="https://github.com/gwli/how2">https://github.com/gwli/how2</a></p>
</div>
<div class="section" id="ndiff">
<h3>ndiff<a class="headerlink" href="#ndiff" title="Permalink to this headline">¶</a></h3>
<p>nmap 输出的diff工具。 我们可能需要各种对象的diff工具。可以对比xml文本输出。</p>
</div>
<div class="section" id="rootfs">
<h3>如何制作 rootfs<a class="headerlink" href="#rootfs" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="use-ssh-in-pip-line">
<h3>use ssh in pip line<a class="headerlink" href="#use-ssh-in-pip-line" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Remote backup</p>
<div class="highlight-bash"><div class="highlight"><pre>sudo dd <span class="k">if</span><span class="o">=</span>/dev/sda <span class="p">|</span> ssh remoteuser@ip.address.of.remote.machine <span class="s1">&#39;dd of=sda.img&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">run script on remote machine</p>
<div class="highlight-bash"><div class="highlight"><pre>ssh remoteuser@ip.address.of.server <span class="s1">&#39;bash -s&#39;</span> &lt; scriptfile.onlocalhost.sh
</pre></div>
</div>
</li>
<li><p class="first">file transfer</p>
<div class="highlight-bash"><div class="highlight"><pre>tar czf - /home/localuser/filefolder <span class="p">|</span> ssh remote-machine@ip.address.of.remote.machine tar -xvzf -C /home/remoteuser/
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="chroot">
<h3>chroot<a class="headerlink" href="#chroot" title="Permalink to this headline">¶</a></h3>
<p>特别来修复坏的系统，用chroot特别有用。</p>
<div class="highlight-bash"><div class="highlight"><pre>mount /sda2 /mnt/sda2
mount -t proc /proc /mnt/sda2/proc
mount --rbind /sys /mnt/sda2/sys
mount --make-rslave /mnt/sda2/sys
mount --rbind /dev /mnt/sda2/dev
mount --make-rslave /mnt/sda2/dev

chroot /mnt/sda2 /bin/bash
</pre></div>
</div>
<p>当然还有schroot, dchroot,pivot_root 具体见 <a class="reference external" href="https://askubuntu.com/questions/158847/what-is-the-difference-of-chroot-dchroot-and-schroot">此</a>
pivot_root和chroot的主要区别是，pivot_root主要是把整个系统切换到一个新的root目录，而移除对之前root文件系统的依赖，这样你就能够umount原先的root文件系统。而chroot是针对某个进程，而系统的其它部分依旧运行于老的root目录。</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="ch">#! /bin/sh</span>
mount -n -t proc proc /proc
<span class="nb">echo</span> 0x0100 &gt;/proc/sys/kernel/real-root-dev
umount -n /proc
</pre></div>
</div>
<p>mount 的时候，会把mount的所有信息都放在 <code class="file docutils literal"><span class="pre">/etc/mtab</span></code> 但是当 <cite>/etc</cite> 只读的情况下，就会mount失改，这时候就会用到 mount -n 不写 /etc/mtab</p>
</div>
<div class="section" id="gtop">
<h3>gtop<a class="headerlink" href="#gtop" title="Permalink to this headline">¶</a></h3>
<p>基于console的可视化例如windows  resmonitor</p>
</div>
<div class="section" id="id12">
<h3>linux 和选择<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>其实只要看到每一个事情起源就自然明白其源由了，例如这么多linux，到底各有什么区别，只要再一下其各个发展史，以及先后顺序就知道了。例如 apt-get dpkg这种方式是debian首创的。 后面系统都会吸取前面系统的优点。 gentoo是出现最迟的，当然也就是优点更多一些了。</p>
<p><a class="reference external" href="http://www.jb51.net/article/32657.htm">linux服务器系统CentOS、uBuntu、Gentoo、FreeBSD、Debian的比较</a>
redhat由于追求稳定性，而发展太慢。而ubuntu 则是通过快速的迭代用的新的技术也保证稳定性。那也就是敏捷也追求吧。这也是 <a class="reference external" href="http://www.zhihu.com/question/24180649">为什么ubuntu server在逐步蚕食CentOS的市场份额？</a>  由于技术本质就是求新求快。例如redhat 中自带的python现在还是2.6。 这些采用自己安装。当然他有一些自己特定的优势。但是长期是谬论， python 2.7 肯定比2.6要更强，更稳定。不管的你的内核更稳定，你的用python不行，还是不行的。当然还得瓶颈是在哪里。</p>
</div>
<div class="section" id="usb">
<h3>usb 启动盘制作<a class="headerlink" href="#usb" title="Permalink to this headline">¶</a></h3>
<p>要想让其可启动，就要让BIOS能够认出来，也就是BIOS本身具有相应的驱动，或者中间的转接，然后是在其引导有引导代码类似于grub的代码能执行，并加载相应的kernel.</p>
<p><a class="reference external" href="http://www.imsiren.com/archives/917">用AT&amp;T 汇编实现 第一个bootloader</a>   BIOS 通电-将磁盘第一个扇区512字节copy到内存的0x0000:0x7c0处，并将CS寄存器设置为0x0000,IP设置为0x07c0, 因为现在CPU处于实模式下，所以CPU下一条将要执行的指令就是CS:IP 将是 0x:0000:0x7c0, 这样就能挂靠 到我们写的bootloader了。</p>
<p>所以只要把USB变成可引导盘，并且分区格式化并不会影响MBR，因为这个是分区之外的事情。 然后就可以像里面copy kernel了。这也就是为什么，今天直接往U盘copy 光盘内容就可以用了的原因。</p>
<p>One of the key function is process the package denpendencies.  this is a troubleness on linux. but the apt-get help to handle them.</p>
<p>as long as,you use share resource with each other, there must be an issue of dependencies. kernel module has this issue. system package has this issue.  dependency is anywhere of linux system.</p>
<p>so there are so many managetools. for ubuntu and debian there is apt-get, dpkg, for SUSE there are zypper and yaST. for Centos and Redhat , there is yup.</p>
<p>gentoo also has its own package system and configuration management system.</p>
<p>sourcelist support three source</p>
<ol class="arabic simple">
<li>deb</li>
<li>deb-src</li>
<li>ppa</li>
<li><a class="reference external" href="http://www.cnblogs.com/cute/archive/2012/05/21/2511571.html">add-apt-repository</a>  ,`PPA &lt;How do I use software from a PPA?]] [[<a class="reference external" href="https://launchpad.net/ubuntu/+ppas">https://launchpad.net/ubuntu/+ppas</a>&gt;`_  is Personal Package Archives (PPA) allow you to upload Ubuntu source packages to be built and published as an apt repository by Launchpad.</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>apt-get --yes install $something

is that it will ask for a manual confirmation if the package signature owner&#39;s public-key is not in the keyring, or some other conditions. to be sure it does not ask a confirmation just do this:

apt-get --yes --force-yes install $something

If you want to have these settings permanent, create a file in /etc/apt/apt.conf.d/, like /etc/apt/apt.conf.d/90forceyes with the following content:

APT::Get::Assume-Yes &quot;true&quot;;
APT::Get::force-yes &quot;true&quot;;
apt-cache search 库。

// get the lib url
apt-cache policy &quot;xxxlib&quot;
</pre></div>
</div>
<p>在17.10之后，就可以直接使用 apturl 来直接从网址安装了，<a class="reference external" href="https://help.ubuntu.com/community/AptURL">https://help.ubuntu.com/community/AptURL</a></p>
<div class="highlight-bash"><div class="highlight"><pre>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 437D05B5 3E5C1192
sudo apt-get update
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h3>如何修复依赖破坏的包<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://help.ubuntu.com/community/AptGet/Howto">https://help.ubuntu.com/community/AptGet/Howto</a></p>
<div class="highlight-bash"><div class="highlight"><pre>apt -f install
auto-apt ./configure
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h3>多版本安装<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>就像python 可以有自己的virtualenv, 对于系统级的其他应用可以用alternatives 命令的相关方式。来管进行管理
配置。</p>
<div class="highlight-bash"><div class="highlight"><pre>alternatives -install XX
update-alternatives
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h3>如何自动添加编译的包<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://wiki.ubuntu.com/AutoDeb">https://wiki.ubuntu.com/AutoDeb</a></p>
</div>
<div class="section" id="deb">
<h3>如果想添加不同架构的deb<a class="headerlink" href="#deb" title="Permalink to this headline">¶</a></h3>
<p>可以用 APT::Architectures
http://stackoverflow.com/questions/6331109/how-to-setup-multiple-architecture-development-environment-under-ubuntu-11-04
或者使用 dpkg &#8211;add-architecture arm64 这样来实现。或者安装某一个包时直接使用 <em>xxx:&lt;arch&gt;</em> 例如 <cite>libglog4cxx10-dev:i386</cite></p>
<p>同时还可以下载代码 <cite>apt-get source package-name</cite> 就可以直接下载当前目录了。</p>
</div>
<div class="section" id="package">
<h3>如何安装新版本上的package<a class="headerlink" href="#package" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">直接使用 Pin的方法，本质就是添加新版本的源，以及修改 /etc/apt/preferences <a class="reference external" href="https://help.ubuntu.com/community/PinningHowto">https://help.ubuntu.com/community/PinningHowto</a></p>
</li>
<li><p class="first">自己从源码编译</p>
<div class="highlight-bash"><div class="highlight"><pre>apt-add-repository <span class="s2">&quot;deb-src .....&quot;</span>
apt-get update
apt-get build-dep firefox-3.0
apt-get -b <span class="nb">source</span> -t <span class="s2">&quot;release branch&quot;</span> firefox-3.0
make <span class="o">&amp;&amp;</span> make install
</pre></div>
</div>
</li>
<li><p class="first">直接使用 <a class="reference external" href="https://help.ubuntu.com/community/UbuntuBackports">UbuntuBackports</a></p>
</li>
</ol>
</div>
<div class="section" id="id16">
<h3>如何保持一个包不更新<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="troubleshot">
<h3>如何troubleshot 包管理<a class="headerlink" href="#troubleshot" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://help.ubuntu.com/community/PackageManagerTroubleshootingProcedure">https://help.ubuntu.com/community/PackageManagerTroubleshootingProcedure</a></p>
</div>
<div class="section" id="id17">
<h3>如何查看所有可用更新<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first"><strong class="command">aptitude search '~U'</strong></p>
</li>
<li><p class="first">可用命令</p>
<div class="highlight-bash"><div class="highlight"><pre>apt list
apt search
apt full-upgrade
apt install
apt remove
</pre></div>
</div>
</li>
<li><p class="first">aptdcon, 这个可以把安装放在队列里，以及不需要root,而不需要人为等另一个install 完成。</p>
</li>
<li><p class="first">同时采用 apt-extracttemplate 把当前系统安装包生成template. 然后在其他机器上安装。</p>
</li>
</ol>
</div>
<div class="section" id="id18">
<h3>源列表格式<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://manpages.ubuntu.com/manpages/wily/man5/sources.list.5.html">http://manpages.ubuntu.com/manpages/wily/man5/sources.list.5.html</a></p>
<ol class="arabic simple">
<li><a class="reference external" href="http://windorain.net/sources-list-format/">源列表格式说明</a> , <a class="reference external" href="http://blog.csdn.net/xizaizhuanyong_/article/details/8170093">说明名2</a></li>
<li><a class="reference external" href="http://hi.baidu.com/penglaiguoguo/item/385acb1553da648c88a9569e">apt-get  代理设置</a></li>
<li><a class="reference external" href="http://www.debian.org/doc/manuals/apt-howto/ch-basico.zh-cn.html">source list 制作方法</a></li>
</ol>
<p>apt-get upgrade 只是升级到当前的软件到最新版本， apt-get dist-upgrade,升级到大版本。
或者用 <strong class="command">sudo do-release-upgrade</strong></p>
</div>
<div class="section" id="id21">
<h3>安装列表<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">apt-get install $(grep -vE &quot;^s*#&quot;|tr &quot;n&quot; '')</strong>
<a class="reference external" href="http://askubuntu.com/questions/252734/apt-get-mass-install-packages-from-a-file">http://askubuntu.com/questions/252734/apt-get-mass-install-packages-from-a-file</a></p>
</div>
<div class="section" id="dpkg">
<h3>dpkg<a class="headerlink" href="#dpkg" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>查询包 <strong class="command">dpkg -l |grep vnc</strong></li>
<li>删除   <strong class="command">dpkg -r vnc</strong></li>
<li>查看依赖 <strong class="command">apt-cache depends packagename</strong></li>
<li>查看安装了哪些文件 <a href="#id22"><span class="problematic" id="id23">:commmand:`dpkg -L packagename`</span></a></li>
</ol>
</div>
<div class="section" id="id24">
<h3>安装位置的选择<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<p>usr is stand for unix system resource,
<a class="reference external" href="http://askubuntu.com/questions/1148/what-is-the-best-place-to-install-user-apps">http://askubuntu.com/questions/1148/what-is-the-best-place-to-install-user-apps</a>
如果只是zip包 standalone App，可以直接使用就放在/opt下面。</p>
</div>
<div class="section" id="id25">
<h3>下一代包管理器<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://nixos.org/nix/">https://nixos.org/nix/</a></p>
<ol class="arabic">
<li><p class="first">在一个现在系统上直接把系统文件打包</p>
<div class="highlight-bash"><div class="highlight"><pre>$tar cvzf suse11_sp3.tgz bin boot etc lib lib64 opt root sbin selinux srv usr var
tar -czpf --one-file-system / <span class="p">|</span> ssh name@hostname <span class="s2">&quot;(cat &gt;ssh_systemrootfs.tgz)&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">在目标机上直接硬盘分区格式化，然后解压</p>
<div class="highlight-bash"><div class="highlight"><pre>$ tar xvf suse11_sp3.tgz
</pre></div>
</div>
</li>
<li><p class="first">并创建那些动态的目录</p>
<div class="highlight-bash"><div class="highlight"><pre>@mkdir dev media mnt proc tmp
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="4">
<li><p class="first">然后启动盘来修复起动项</p>
<div class="highlight-bash"><div class="highlight"><pre>$restore grub,
mount /dev/sda1 /mnt/sda1
grub-install --boot-directory<span class="o">=</span>/mnt/sda1/boot /dev/sda1 --force
grub-mkconfig -o /mnt/sda1/boot/grub.cfg
</pre></div>
</div>
<ol class="arabic simple">
<li><a class="reference external" href="http://linux.chinaunix.net/docs/2007-04-03/4110.shtml">使用官方Ubuntu软件库构建DVD镜像</a></li>
<li><a class="reference external" href="Get:3http://us.archive.ubuntu.com/ubuntu/precise/universelibstroke0amd640.5.1-6&amp;#91;9,590B]">linux release server</a></li>
<li><a class="reference external" href="http://linuxtoy.org/archives/use-zsync-to-update-existing-iso-images.html">利用 Zsync 更新已有的 Ubuntu ISO 镜像</a>  <a class="reference external" href="http://zsync.moria.org.uk/">http://zsync.moria.org.uk/</a></li>
<li><a class="reference external" href="http://zh.wikipedia.org/wiki/Jigdo">Jigdo（&amp;#34;Jigsaw download&amp;#34;，曲线下载）是为Debian包设计的下载工具，可以从几个镜像站点下载不同的文件，然后再生成一个CD镜像</a></li>
<li><a class="reference external" href="http://zealtea.yo2.cn/articles/metalink.html">metalink</a></li>
<li><a class="reference external" href="http://hi.baidu.com/wy975740772/item/4d44bc092c64b53df3eafcf2">ubuntu alternate版和desktop版区别&amp;#95;</a></li>
<li><a class="reference external" href="http://refspecs.linuxfoundation.org/lsb.shtml">lsb standard</a></li>
</ol>
<p>#. <a class="reference external" href="http://www.4wei.cn/archives/1001458/comment-page-1">中文支持</a>
Grub2AndBootup.rst</p>
</li>
</ol>
</div>
<div class="section" id="install">
<h3>install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<p>所有安装最终操作就是copy文件，并且配制正确的权限与属性，以及根据系统的环境，向系统注册一些信息，或者添加环境变量。  所以纯手工的操作那就是cp+chown,chmod+strip 等等。 而在 install 一条命令就把这些全度搞定了。
<a class="reference external" href="http://unix.stackexchange.com/questions/94679/what-is-the-purpose-of-the-install-command">http://unix.stackexchange.com/questions/94679/what-is-the-purpose-of-the-install-command</a></p>
</div>
<div class="section" id="ubuntu">
<h3>ubuntu 发行光盘的制作<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h3>
<p>现在对于linux的整个框架熟悉了之后，再怎么操作，就容易了，也就是那些stage3 tarball就看你怎么安装了。 用什么介质就要使用对应的格式。 例如光盘格式 sqfs 就是为方面其把从光盘放进内存里。 或者其他的.img格式。直接放在哪里，然后直接chroot启动，或者chroot之后再更新。或者可以在 android 的源码中可以找到各种工具  /build/tools/XXX。 例如img 解压，对比工具等等。</p>
<p>至于采用什么格式，还得看启动kernel支持哪种类型，一般都会支持sqfs格式的。</p>
<p>由于ISO文件中只读，于是不能写入。 于是就有casper-rw 的功能，实际就是在系统里默认mount这个目录，利用autofs,unionfs的功能http://unionfs.filesystems.org/  就实现了这个功能。也就是在USB生成一个casper-rw的文件。 并利用mkfs -f 把这个文件当做系统格式化。 dd 来生成这样一个文件。
#. <a class="reference external" href="http://www.syslinux.org/wiki/index.php/ISOLINUX">http://www.syslinux.org/wiki/index.php/ISOLINUX</a>
#. <a class="reference external" href="http://unix.stackexchange.com/questions/122832/how-to-use-casper-rw-file-for-persistance">http://unix.stackexchange.com/questions/122832/how-to-use-casper-rw-file-for-persistance</a>
#. <a class="reference external" href="https://help.ubuntu.com/community/LiveCDCustomization">https://help.ubuntu.com/community/LiveCDCustomization</a>
#. <a class="reference external" href="http://lifehacker.com/5085405/make-any-linux-directory-into-an-iso-file">http://lifehacker.com/5085405/make-any-linux-directory-into-an-iso-file</a></p>
<p>而casper,ubuntu 等这些用户都是动态创建的。主要过程那就是/casper/filesystem.squashfs 的制作与修改。
而起动时需要initrd.lz 以及其修改。当然也可以利用ubuntu Customization Kit.
<a class="reference external" href="https://help.ubuntu.com/community/LiveCD/Persistence">https://help.ubuntu.com/community/LiveCD/Persistence</a> 原来创建一个Casper-rw 文件来进行存储，这个大小
还是可以重定义的。</p>
<p>preseed 目录是用来存放预配置文件。</p>
<p>实现也是采用grub来起动的。</p>
</div>
<div class="section" id="creat-bootable-usb">
<h3>Creat bootable usb<a class="headerlink" href="#creat-bootable-usb" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Download syslinux on windows</dt>
<dd><p class="first last"><a class="reference external" href="http://www.kernel.org/pub/linux/utils/boot/syslinux/syslinux-4.04.zip">http://www.kernel.org/pub/linux/utils/boot/syslinux/syslinux-4.04.zip</a></p>
</dd>
</dl>
<ol class="arabic simple" start="2">
<li>Format USB stick in fat32</li>
<li>Copy syslinux.exe to &lt;usb&gt;/boot/syslinux</li>
<li>boot
cd &lt;usb&gt;bootsyslinux
syslinux.exe -ma -d /boot/syslinux &lt;usb driver letter:&gt;</li>
<li>find these files and copy to &lt;usb&gt;bootsyslinux
memdisk                   引导IMG镜像的文件
vesamenu.c32               二种窗口模块之一
menu.c32                   二种窗口模块之一
chain.c32                   指定分区启动  如：chain.c32 hd0,1 (或chain.c32    hd1,1)
reboot.c32                  重新启动计算机</li>
<li>Create an empty file named livecd in usb root</li>
</ol>
</li>
</ol>
<p><a class="reference external" href="http://www.ubuntu.com/download/help/create-a-usb-stick-on-windows">create-a-usb-stick-on-windows</a></p>
<div class="highlight-bash"><div class="highlight"><pre>cat ***ISO  &gt;/dev/sdb <span class="p">;</span>sync
</pre></div>
</div>
</div>
<div class="section" id="network-install">
<h3>network install<a class="headerlink" href="#network-install" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id27">
<h3>思考<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.linuxidc.com/linux/2011-02/31947.htm">Start NFS server on Ubuntu</a>   <a class="reference external" href="FileSystem">filesystem</a></p>
</div>
<div class="section" id="install-nfs-on-ubuntu">
<h3>Install NFS on Ubuntu<a class="headerlink" href="#install-nfs-on-ubuntu" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">sudo apt-get install nfs-kernel-server</p>
</li>
<li><p class="first">Edit /etc/exports, add line at the end of file:</p>
<div class="highlight-bash"><div class="highlight"><pre>/home/tss3st  *<span class="o">(</span>rw,sync,no_root_squash<span class="o">)</span>
</pre></div>
</div>
</li>
</ol>
<p><a href="#id28"><span class="problematic" id="id29">**</span></a></p>
<ol class="arabic">
<li><p class="first">Restart NFS service</p>
<div class="highlight-bash"><div class="highlight"><pre>sudo service portmap restart
sudo service nfs-kernel-server restart
showmount -e
</pre></div>
</div>
</li>
</ol>
<p>### Mount A:/home/A/ on Solaris</p>
<ol class="arabic simple">
<li>Login to B as user &#8220;root&#8221;</li>
<li>Create directory:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mkdir -p /mnt/svlinux01/home/A/</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li>Mount:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mount -F nfs -o rw A:/home/A/   /mnt/A/home/A</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>fs-nts3  &lt;IP&gt;:/remotepathin_etc_exports &lt;localPath&gt;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Chmod:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>chmod 777 /mnt/A/home/A/automation/mail/</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="5">
<li>Create soft link:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ln -s /mnt/svlinux01/home/A/automation/mail/ /home/A/WWW/automation/mail/</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p><em>Mount and chmod on each Solaris</em>
For all Solaris which we run NEAT, we need to mount this directory to local /mnt directory and chmod for it:</p>
<p><em>双系统看不到起动菜单</em>
自己来搞grub,或者把linux先装一下，再然后再重装一下就Ok了。再次重装的时候，它会识别出两个系统就会自动去做。</p>
<p>&#8211; Main.GangweiLi - 15 Jan 2013</p>
<p><em>vmware share folder</em> linux 下的目录是 /mnt/hgfs</p>
<p>&#8211; Main.GangweiLi - 15 Jan 2013</p>
<p><em>如何快速部署linux</em>
1. 使用dd, 或者类似于ghost东西，把一个硬件快速复制另一个硬件，然后拿去直接启动使用，但是windows7要把设置成初始安装模式，这样才能启动，因为它的启动会去读硬盘信息。</p>
<p>&#8211; Main.GangweiLi - 15 Jan 2013</p>
<p>addsuer &#8220;victor&#8221;
sudo usermod -G adm -a victor
vim /etc/sudoers     copy root to a new line change root to victor</p>
<p><em>backup and restore</em></p>
<p>when backup and restore, there is three things to know:
%BROWN%
#.  size of data
#.  start address, in another way where is it?
#. what type of the data. do we need now the internal structure, due to some manipulation on the data is base on its internal structure ,that&#8217;s the type.
%ENDCOLOR%
there is some way:
dd   directly copy sectors to the harddisk. but how the dd know the how many the space is used.
partclone   can do the backup and restore base on the partition. and it know many space is used.</p>
<p>&#8211; Main.GangweiLi - 28 Mar 2013</p>
<p><em>Configuration structure</em>
Now, most of the big application use configuration. and these configuration mechanism should have <em>include</em>, so that there is structure:</p>
<dl class="docutils">
<dt>/etc/ld.so.conf</dt>
<dd>include /etc/ld.so.conf.d/XX.conf</dd>
<dt>/etc/ld.so.conf.d/</dt>
<dd>XXXXXXXXX.conf
AAAAAAA.conf</dd>
</dl>
<p>&#8211; Main.GangweiLi - 14 Apr 2013</p>
<p><em>file operation</em>
each one type of archive file, would support XXgrep,XXcat,xxxfind,xxxless.</p>
<p>???BLOCK MISSING</p>
</div>
<div class="section" id="can-t-resolve-dns">
<h3>can&#8217;t resolve dns<a class="headerlink" href="#can-t-resolve-dns" title="Permalink to this headline">¶</a></h3>
<p>只需要设置一下DNS，就是 <em>/etc/resolve.conf</em></p>
<p>常见的配置</p>
<div class="highlight-bash"><div class="highlight"><pre>nameserver 127.0.1.1
search nvidia.com
</pre></div>
</div>
</div>
<div class="section" id="id30">
<h3>如何修复系统<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://help.ubuntu.com/community/LiveCdRecovery">https://help.ubuntu.com/community/LiveCdRecovery</a></p>
<ol class="arabic">
<li><p class="first">livecd 起动</p>
</li>
<li><p class="first">chroot to harddisk</p>
<div class="highlight-bash"><div class="highlight"><pre>mount /sda2 /mnt/sda2
mount -t proc /proc /mnt/sda2/proc
mount --rbind /sys /mnt/sda2/sys
mount --make-rslave /mnt/sda2/sys
mount --rbind /dev /mnt/sda2/dev
mount --make-rslave /mnt/sda2/dev

chroot /mnt/sda2 /bin/bash

<span class="c1">#open 2nd terminal</span>
cat /etc/resolve.conf /mnt/sda2/etc/resolve.conf
apt remove &lt;bad package&gt;
apt autoremove
apt update
apt install &lt;right packages&gt;
<span class="c1">#apt install linux-generic</span>
apt upgrade
</pre></div>
</div>
</li>
</ol>
<div class="section" id="id31">
<h4>网络<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id32">
<h3>如何检查网速<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<p>自己直接ifconfig ; sleep 1;ifconfig 查看结果相减就可以了。当然也有一些其他的命令
nload,iftop,iptraf,nethogs,bmon <a class="reference external" href="http://os.51cto.com/art/201404/435279.htm">http://os.51cto.com/art/201404/435279.htm</a></p>
</div>
<div class="section" id="dns-lookup">
<h3>dns lookup<a class="headerlink" href="#dns-lookup" title="Permalink to this headline">¶</a></h3>
<p>nslookup 可以查询IP,或者域名。</p>
<p><code class="file docutils literal"><span class="pre">/etc/resolve.conf</span></code> 来配置DNS</p>
<div class="highlight-bash"><div class="highlight"><pre>nameserver 10.19.189.252
search xxx.com
</pre></div>
</div>
<p>但是其他域名管理，以及LDAP等等以及NIS都是通过NSS来管理的,配置文件在 <code class="file docutils literal"><span class="pre">/etc/nsswitch.conf</span></code> .</p>
</div>
<div class="section" id="ip">
<h3>IP 冲突<a class="headerlink" href="#ip" title="Permalink to this headline">¶</a></h3>
<p>在windows下会有直接提示IP冲突。 在linux下则没有。</p>
<ol class="arabic">
<li><p class="first">在其中冲突的一台用 <strong class="command">arping</strong> .</p>
</li>
<li><p class="first">查看本地的arp cache</p>
<div class="highlight-bash"><div class="highlight"><pre>$ arp -a &lt;IP&gt;
</pre></div>
</div>
</li>
</ol>
<ol class="arabic">
<li><p class="first">用ifconfig</p>
<p><strong class="command">ifconfig set eth0 DPCP</strong></p>
</li>
<li><p class="first">用dhclient</p>
<p><strong class="command">dhclient -r &amp;&amp; sleep 20 &amp;&amp; dhclient</strong></p>
</li>
</ol>
<p>dhcp 的配置文件在 /etc/sysconfig/network/dhcp</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c1"># If it happens during booting it won&#39;t be a problem and you can</span>
<span class="c1"># safely say &quot;yes&quot; here. For a roaming notebook with X kept running, &quot;no&quot;</span>
<span class="c1"># makes more sense.</span>
<span class="c1">#</span>
<span class="nv">DHCLIENT_SET_HOSTNAME</span><span class="o">=</span><span class="s2">&quot;no&quot;</span>

<span class="c1">## Type:        string</span>
<span class="c1">## Default:     AUTO</span>
</pre></div>
</div>
<p><a class="reference external" href="https://askubuntu.com/questions/169473/sharing-connection-to-other-pcs-via-wired-ethernet">https://askubuntu.com/questions/169473/sharing-connection-to-other-pcs-via-wired-ethernet</a></p>
<ol class="arabic">
<li><p class="first">选择编辑网络</p>
</li>
<li><p class="first">建立一个新连接</p>
</li>
<li><p class="first">ipv4 setting 选择 &#8220;share to other computers&#8221;</p>
</li>
<li><p class="first">ifconfig 就能看到这个端口上起了一个DHCPserver. 也可以用以下命令</p>
<div class="highlight-bash"><div class="highlight"><pre>ifconfig eth0 <span class="o">[</span>-<span class="o">]</span>pointtopoint <span class="o">[</span>addre<span class="o">]</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic">
<li><p class="first">上电启动，内核的加载驱动并注册相应的中断，内核可以识别硬件了。</p>
</li>
<li><p class="first">udev 识别硬件信息，并建立相应的逻辑设备，例如网卡哪一个eth0,哪一个是eth1,以及USB
等等。所以要改设备的逻辑名，就是在这个时候时候改的 <code class="file docutils literal"><span class="pre">/etc/udev/rules.d/</span></code></p>
</li>
<li><p class="first">init 根据runlevel决定起哪些服务。
各个启动过程，几家linux的实现，大体上一致，而事实是各个不相同。</p>
<ol class="arabic simple">
<li>gentoo 是在 <code class="file docutils literal"><span class="pre">/etc/runlevel</span></code> 下的，并且采用 <strong class="command">rc-config</strong> 来查看的。
直接在对应的level下建立一个link 就可以了。</li>
</ol>
<p>#. SUSE 的启动是并行的，是用.before, .after等来实现的。
#.</p>
</li>
</ol>
</div>
<div class="section" id="ssh">
<h3>SSH<a class="headerlink" href="#ssh" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="c1">#.forward X</span>
ssh -X user@hostname

<span class="c1">#no password login</span>
<span class="c1">#. ssh-keygen</span>
<span class="c1">#. ssh-copy-id user@remotehost</span>
<span class="c1">#. vim ~/.ssh/config  (file owner 600)</span>

   Host devbox
      HostName &lt;IP&gt;
      Port 22
      User <span class="nb">test</span>
      PreferredAuthentications publickey
      IdentityFile ~/.ssh/id_rsa
</pre></div>
</div>
<ol class="arabic simple">
<li>对于</li>
</ol>
</div>
<div class="section" id="id33">
<h3>如何扫描机器IP<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>nmap -p <span class="m">22</span> --open -sV 10.19.189.0/24 &gt;sshservers
grep -B <span class="m">4</span> <span class="s1">&#39;OpenSSH 5.8p1&#39;</span> sshservers
</pre></div>
</div>
<div class="section" id="gentoo">
<h4>gentoo<a class="headerlink" href="#gentoo" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="vebegin-veend-ebegin-eend-ewarning">
<h3>vebegin,veend, ebegin,eend. ewarning<a class="headerlink" href="#vebegin-veend-ebegin-eend-ewarning" title="Permalink to this headline">¶</a></h3>
<p>这些是gentoo为了美化console的输出,而实现的一些格式化命令.
ewaring 给你前面加个* 并且还绿色.</p>
<p>对于rc.local的输出,没有有产生,是在于被 重定向到/dev/null中了.</p>
<p>只需要这个改掉了就行了.https://forums.gentoo.org/viewtopic-t-1009110.html?sid=ab27cf116dba07711a215b9a7ae8f3bb</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot;rc_verbose=yes&quot;</span> &gt; /etc/conf.d/local
</pre></div>
</div>
<p>可以参考https://devmanual.gentoo.org/ebuild-writing/messages/index.html message的格式化.</p>
<p>对于从stage1,开始,无非要从buildchain的准备开始.然后根据依赖,逐个库的编译.
<a class="reference external" href="https://forums.gentoo.org/viewtopic-t-420117-highlight-fiordland.html">https://forums.gentoo.org/viewtopic-t-420117-highlight-fiordland.html</a>
<a class="reference external" href="http://www.linuxforums.org/forum/gentoo-linux/191522-gentoo-stage-1-installation-info.html">http://www.linuxforums.org/forum/gentoo-linux/191522-gentoo-stage-1-installation-info.html</a></p>
<p>编译,主要 也就是编译选项与链接选项.</p>
<p>对于kernel的生成,也有现成工具来一步生成kernel,initramfs
<a class="reference external" href="https://wiki.gentoo.org/wiki/Genkernel">https://wiki.gentoo.org/wiki/Genkernel</a>
<a class="reference external" href="https://wiki.gentoo.org/wiki/Initramfs/Guide">https://wiki.gentoo.org/wiki/Initramfs/Guide</a>
<a class="reference external" href="https://gitweb.gentoo.org/proj/genkernel.git">https://gitweb.gentoo.org/proj/genkernel.git</a></p>
</div>
<div class="section" id="ntfs-3g-2-8">
<h3>对于ntfs-3g 找不到2.8的库<a class="headerlink" href="#ntfs-3g-2-8" title="Permalink to this headline">¶</a></h3>
<p>经过对比好的机器上的库的依赖，发现只是ln 不对，在出错的机器上的，libfuse.so.2 -&gt; libfuse.so.2.7,而机器 上是有 libfuse.so.2.9
ntfs-3g 要求 2.8. 所以2.9肯定可以用。 所以只用修改一下软链就行了。</p>
</div>
<div class="section" id="livecd">
<h3>直接使用livecd的编译<a class="headerlink" href="#livecd" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>cp /proc/config.gz .
gunzip config.gz
cat config &gt;/usr/src/linux/.config
you find bzImage from /usr/src/linux/arch/x86/boot/bzImage
</pre></div>
</div>
</div>
<div class="section" id="id34">
<h3>升级<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>下载minimal-livecd</li>
<li>configureation for STAGE3</li>
<li>cp config for livecd (x86)
- create bzImage
- create initramfs(应该与bzImage的arch一致).</li>
<li>更新fdisk</li>
<li>install perl lib.</li>
</ol>
<p>#. install grub
#.
#.  create mpcd, and tarball.
#.</p>
</div>
<div class="section" id="genkernel">
<h3>genkernel<a class="headerlink" href="#genkernel" title="Permalink to this headline">¶</a></h3>
<p>sys-kernel/genkernel
/usr/share/genkernel 有各种现成的脚本</p>
</div>
<div class="section" id="id35">
<h3>Ubuntu<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>vim</li>
<li>sshd</li>
<li>root login<ul>
<li><a class="reference external" href="https://help.ubuntu.com/community/AutoLogin">https://help.ubuntu.com/community/AutoLogin</a></li>
<li>lightdm.conf</li>
</ul>
</li>
<li>gtl</li>
</ol>
</div>
<div class="section" id="how-to-build-your-own-kernel">
<h3>How to build Your own Kernel<a class="headerlink" href="#how-to-build-your-own-kernel" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel">https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel</a></p>
<div class="section" id="suse">
<h4>SUSE<a class="headerlink" href="#suse" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id36">
<h3>安装要求<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>install build toolchain</li>
<li>auto login as root</li>
<li>config vnc  yast/vnc administrator</li>
<li>install nvidia driver</li>
<li>disable fireware</li>
<li>setup ssh</li>
<li>startup application</li>
<li>config /etc/fstab</li>
<li>disable screen lock</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">gnome-control-center 控制面板</p>
</div>
</div>
<div class="section" id="nvidia-driver">
<h3>如何安装 nvidia driver<a class="headerlink" href="#nvidia-driver" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="c1"># install kernel source</span>
<span class="c1"># insert 2nd DVD</span>
zypper install kernel-source
rcxdm start
./NVIDIA-linux-x86_64.run
rcxdm stop
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">chkconfig 启动service <a class="reference external" href="http://superuser.com/questions/752448/how-to-make-a-service-start-in-suse-enterprise-linux">http://superuser.com/questions/752448/how-to-make-a-service-start-in-suse-enterprise-linux</a></p>
</li>
<li><p class="first">How to run my script after SuSE finished booting up <a class="reference external" href="http://unix.stackexchange.com/questions/43230/how-to-run-my-script-after-suse-finished-booting-up">http://unix.stackexchange.com/questions/43230/how-to-run-my-script-after-suse-finished-booting-up</a></p>
</li>
<li><p class="first">disable firewall</p>
<div class="highlight-bash"><div class="highlight"><pre>/sbin/SuSEfirewall2 off
/sbin/SuSEfirewall2 on
/etc/init.d/SuSEfirewall2_setup stop
</pre></div>
</div>
</li>
<li><p class="first">Root autologin: <a class="reference external" href="https://gist.github.com/gwli/c94fec782aab125d6a0c">https://gist.github.com/gwli/c94fec782aab125d6a0c</a></p>
<p><strong class="command">vi /etc/sysconfig/displaymanager</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll">DISPLAYMANAGER_AUTOLOGIN=”root”
</span></pre></div>
</div>
</li>
<li><p class="first">add repo source
yast2&gt;software repository</p>
</li>
</ol>
</div>
<div class="section" id="yast2">
<h3>YAST2<a class="headerlink" href="#yast2" title="Permalink to this headline">¶</a></h3>
<p>SUSE 自带的大规模安装部署工具。<a class="reference external" href="https://www.suse.com/zh-cn/documentation/sles11/singlehtml/book_sle_deployment/cha.deployment.remoteinst.html#sec.deployment.remoteinst.scenario.vncpxe">https://www.suse.com/zh-cn/documentation/sles11/singlehtml/book_sle_deployment/cha.deployment.remoteinst.html#sec.deployment.remoteinst.scenario.vncpxe</a></p>
<p>SUSE 的部署指南
<a class="reference external" href="https://www.suse.com/documentation">https://www.suse.com/documentation</a></p>
<p><a class="reference external" href="https://www.suse.com/zh-cn/documentation/sles11/singlehtml/book_sle_deployment/book_sle_deployment.html">https://www.suse.com/zh-cn/documentation/sles11/singlehtml/book_sle_deployment/book_sle_deployment.html</a></p>
<div class="section" id="centos">
<h4>Centos<a class="headerlink" href="#centos" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="how-to-config">
<h3>how to config<a class="headerlink" href="#how-to-config" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">sshd run on startup
<strong class="command">chkconfig sshd on</strong></p>
</li>
<li><p class="first">install python 2.7 on centos 6.5</p>
<p><a class="reference external" href="http://bicofino.io/blog/2014/01/16/installing-python-2-dot-7-6-on-centos-6-dot-5/">http://bicofino.io/blog/2014/01/16/installing-python-2-dot-7-6-on-centos-6-dot-5/</a></p>
</li>
<li><p class="first">hostname</p>
<div class="highlight-bash"><div class="highlight"><pre>hostname computername
vim /etc/hostname
</pre></div>
</div>
</li>
<li><p class="first">build-essential</p>
<p><strong class="command">yum groupinstall &quot;Development Tools&quot;</strong></p>
</li>
<li><p class="first">bootup options</p>
</li>
<li><p class="first">vncserver</p>
<div class="highlight-bash"><div class="highlight"><pre>rpm -qa <span class="p">|</span>grep vnc
yum install tigervnc
yum install tigervnc-server
vncserver
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">disable firewall</p>
<p><strong class="command">/sbin/service iptables stop</strong></p>
</li>
<li><p class="first">change xstartup file</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">unset</span> SESSION_MANAGER
<span class="nb">exec</span> /etc/X11/xinit/xinitrc
<span class="o">[</span> -x /etc/vnc/xstartup <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exec</span> /etc/vnc/xstartup
<span class="o">[</span> -r $HOME/.Xresources <span class="o">]</span> <span class="o">&amp;&amp;</span> xrdb $HOME/.Xresources
xsetroot -solid grey
vncconfig -iconic <span class="p">&amp;</span>
xterm -geometry 80x24+10+10 -ls -title <span class="s2">&quot;</span>$<span class="s2">VNCDESKTOP Desktop&quot;</span> <span class="p">&amp;</span>
gnome-session <span class="p">&amp;</span> <span class="c1">#set starting GNOME desktop</span>
<span class="c1">#startkde &amp; #kde desktop</span>
<span class="c1">#twm &amp; #Text interface</span>
<span class="c1">#/usr/bin/startxfce4</span>
<span class="c1">#exec /usr/bin/fluxbox</span>
</pre></div>
</div>
<ol class="arabic simple">
<li>bootup
<strong class="command">chkconfig vncserver on</strong>
<strong class="command">chkconfig iptables off</strong></li>
</ol>
</li>
</ol>
</li>
</ol>
<p>this new method is working <a class="reference external" href="https://www.howtoforge.com/vnc-server-installation-on-centos-7">vnc-server-installation-on-centos-7</a>
#. autologin</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre>vim /etc/gdm/custom.conf
<span class="o">[</span>daemon<span class="o">]</span>
<span class="nv">AutomaticEnable</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">AutomaticLogic</span><span class="o">=</span>root
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this just work VM.</p>
</div>
<table class="docutils citation" frame="void" id="ref" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[ref]</td><td><a class="reference external" href="http://blog.csdn.net/kpshare/article/details/7523546">http://blog.csdn.net/kpshare/article/details/7523546</a></td></tr>
</tbody>
</table>
<p><a class="reference external" href="https://www.centos.org/forums/viewtopic.php?f=47&amp;t=48288">https://www.centos.org/forums/viewtopic.php?f=47&amp;t=48288</a></p>
<ol class="arabic simple">
<li>usb install</li>
</ol>
<dl class="docutils">
<dt><a class="reference external" href="http://wiki.centos.org/zh/HowTos/InstallFromUSBkey">http://wiki.centos.org/zh/HowTos/InstallFromUSBkey</a></dt>
<dd>dd if=CenOS-6.5.iso of=/dev/sdb
## method 2
cat XX.iso &gt;/dev/sdb
sync</dd>
</dl>
</div>
<div class="section" id="install-nvidia-driver">
<h3>install nvidia driver<a class="headerlink" href="#install-nvidia-driver" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.dedoimedo.com/computers/centos-7-nvidia.html">http://www.dedoimedo.com/computers/centos-7-nvidia.html</a></p>
</div>
<div class="section" id="yum-and-rpm">
<h3>yum and rpm<a class="headerlink" href="#yum-and-rpm" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://wiki.centos.org/PackageManagement/Yum">http://wiki.centos.org/PackageManagement/Yum</a></p>
<ol class="arabic">
<li><p class="first">search</p>
<div class="highlight-bash"><div class="highlight"><pre>rpm -qa <span class="p">|</span>grep vnc
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="init-bootup">
<h3>init bootup<a class="headerlink" href="#init-bootup" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.cnblogs.com/phpnow/archive/2012/07/14/2591849.html">checkconfig</a></p>
</div>
<div class="section" id="grub">
<h3>grub<a class="headerlink" href="#grub" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>change  device.map</li>
<li>/etc/default/grub</li>
<li>/etc/grub.d/RAME</li>
<li>/etc/fstab or /etc/init/fstab</li>
</ol>
</div>
<div class="section" id="mountall">
<h3>mountall<a class="headerlink" href="#mountall" title="Permalink to this headline">¶</a></h3>
<p>the bootmenu just like an txt control. as you use the raw_input.</p>
</div>
<div class="section" id="enter-text-interface">
<h3>enter text interface<a class="headerlink" href="#enter-text-interface" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">ctrl+alt+F1~F6</strong></p>
</div>
<div class="section" id="no-lock-screen">
<h3>no lock screen<a class="headerlink" href="#no-lock-screen" title="Permalink to this headline">¶</a></h3>
<p>change power management.</p>
</div>
<div class="section" id="config-boot">
<h3>config boot<a class="headerlink" href="#config-boot" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">config /etc/fstab</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c1">#. /etc/fstab</span>
<span class="c1">#</span>
<span class="c1"># /etc/fstab</span>
<span class="c1"># Created by anaconda on Tue Mar 17 01:42:54 2015</span>
<span class="c1">#</span>
<span class="c1"># Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;</span>
<span class="c1"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span>
<span class="c1">#</span>
/dev/sda1 /                       ext4    defaults        <span class="m">1</span> 1
</pre></div>
</div>
</li>
<li><p class="first">change /boot/grub2/grub.cfg</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="k">if</span> <span class="o">[</span> x<span class="nv">$fea</span>ture_platform_search_hint <span class="o">=</span> xy <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    search --no-floppy --fs-uuid --set<span class="o">=</span>root --hint-bios<span class="o">=</span>hd0,msdos1 --hint-efi<span class="o">=</span>hd0,msdos1 --hint-baremetal<span class="o">=</span>ahci0,msdos1 --hint<span class="o">=</span><span class="s1">&#39;hd0,msdos1&#39;</span>  35bf2afd-b8f4-4a7e-ab82-12adba3e8cbc
<span class="k">else</span>
    search --no-floppy --fs-uuid --set<span class="o">=</span>root 35bf2afd-b8f4-4a7e-ab82-12adba3e8cbc
<span class="k">fi</span>

<span class="c1">####### change from above to the below</span>
<span class="k">if</span> <span class="o">[</span> x<span class="nv">$fea</span>ture_platform_search_hint <span class="o">=</span> xy <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
          search --no-floppy --file --set<span class="o">=</span>root --hint-bios<span class="o">=</span>hd0,msdos1 --hint-efi<span class="o">=</span>hd0,msdos1 --hint-baremetal<span class="o">=</span>ahci0,msdos1 --hint<span class="o">=</span><span class="s1">&#39;hd0,msdos1&#39;</span>  /boot/vmlinuz-3.10.0-123.20.1.el7.x86_64
<span class="k">else</span>
    search --no-floppy --file --set<span class="o">=</span>root /boot/vmlinuz-3.10.0-123.20.1.el7.x86_64
<span class="k">fi</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="redhat">
<h3>redhat<a class="headerlink" href="#redhat" title="Permalink to this headline">¶</a></h3>
<p>just select software devleopment workstation. anything is ready except python 2.7.</p>
<p>you can use vino-preference to config.</p>
<p>rm -fr ~/.gnomme2/default/default.keyring</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">基础篇</a><ul>
<li><a class="reference internal" href="#linux">Linux 的目录结构</a><ul>
<li><a class="reference internal" href="#id2">最基本目录</a></li>
<li><a class="reference internal" href="#var-log">/var/log</a><ul>
<li><a class="reference internal" href="#id3">Linux 基本命令</a><ul>
<li><a class="reference internal" href="#id4">命令补全</a></li>
<li><a class="reference internal" href="#id5">关机操作</a></li>
<li><a class="reference internal" href="#id6">目录操作</a></li>
<li><a class="reference internal" href="#id7">文件操作</a></li>
<li><a class="reference internal" href="#id8">其它</a></li>
<li><a class="reference internal" href="#id9">解压</a></li>
<li><a class="reference internal" href="#tar">tar 到指定的目录</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ar">ar</a></li>
<li><a class="reference internal" href="#id10">常用的正则表式</a></li>
<li><a class="reference internal" href="#coreutils">coreutils</a></li>
<li><a class="reference internal" href="#notification">notification</a></li>
<li><a class="reference internal" href="#fortune">fortune</a></li>
<li><a class="reference internal" href="#udevadm">udevadm</a></li>
<li><a class="reference internal" href="#pdfgrep">pdfgrep</a></li>
<li><a class="reference internal" href="#googler">googler</a></li>
<li><a class="reference internal" href="#how2">How2</a></li>
<li><a class="reference internal" href="#ndiff">ndiff</a></li>
<li><a class="reference internal" href="#rootfs">如何制作 rootfs</a></li>
<li><a class="reference internal" href="#use-ssh-in-pip-line">use ssh in pip line</a></li>
<li><a class="reference internal" href="#chroot">chroot</a></li>
<li><a class="reference internal" href="#gtop">gtop</a></li>
<li><a class="reference internal" href="#id12">linux 和选择</a></li>
<li><a class="reference internal" href="#usb">usb 启动盘制作</a></li>
<li><a class="reference internal" href="#id13">如何修复依赖破坏的包</a></li>
<li><a class="reference internal" href="#id14">多版本安装</a></li>
<li><a class="reference internal" href="#id15">如何自动添加编译的包</a></li>
<li><a class="reference internal" href="#deb">如果想添加不同架构的deb</a></li>
<li><a class="reference internal" href="#package">如何安装新版本上的package</a></li>
<li><a class="reference internal" href="#id16">如何保持一个包不更新</a></li>
<li><a class="reference internal" href="#troubleshot">如何troubleshot 包管理</a></li>
<li><a class="reference internal" href="#id17">如何查看所有可用更新</a></li>
<li><a class="reference internal" href="#id18">源列表格式</a></li>
<li><a class="reference internal" href="#id21">安装列表</a></li>
<li><a class="reference internal" href="#dpkg">dpkg</a></li>
<li><a class="reference internal" href="#id24">安装位置的选择</a></li>
<li><a class="reference internal" href="#id25">下一代包管理器</a></li>
<li><a class="reference internal" href="#install">install</a></li>
<li><a class="reference internal" href="#ubuntu">ubuntu 发行光盘的制作</a></li>
<li><a class="reference internal" href="#creat-bootable-usb">Creat bootable usb</a></li>
<li><a class="reference internal" href="#network-install">network install</a></li>
<li><a class="reference internal" href="#id27">思考</a></li>
<li><a class="reference internal" href="#install-nfs-on-ubuntu">Install NFS on Ubuntu</a></li>
<li><a class="reference internal" href="#can-t-resolve-dns">can&#8217;t resolve dns</a></li>
<li><a class="reference internal" href="#id30">如何修复系统</a><ul>
<li><a class="reference internal" href="#id31">网络</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32">如何检查网速</a></li>
<li><a class="reference internal" href="#dns-lookup">dns lookup</a></li>
<li><a class="reference internal" href="#ip">IP 冲突</a></li>
<li><a class="reference internal" href="#ssh">SSH</a></li>
<li><a class="reference internal" href="#id33">如何扫描机器IP</a><ul>
<li><a class="reference internal" href="#gentoo">gentoo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vebegin-veend-ebegin-eend-ewarning">vebegin,veend, ebegin,eend. ewarning</a></li>
<li><a class="reference internal" href="#ntfs-3g-2-8">对于ntfs-3g 找不到2.8的库</a></li>
<li><a class="reference internal" href="#livecd">直接使用livecd的编译</a></li>
<li><a class="reference internal" href="#id34">升级</a></li>
<li><a class="reference internal" href="#genkernel">genkernel</a></li>
<li><a class="reference internal" href="#id35">Ubuntu</a></li>
<li><a class="reference internal" href="#how-to-build-your-own-kernel">How to build Your own Kernel</a><ul>
<li><a class="reference internal" href="#suse">SUSE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id36">安装要求</a></li>
<li><a class="reference internal" href="#nvidia-driver">如何安装 nvidia driver</a></li>
<li><a class="reference internal" href="#yast2">YAST2</a><ul>
<li><a class="reference internal" href="#centos">Centos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-config">how to config</a></li>
<li><a class="reference internal" href="#install-nvidia-driver">install nvidia driver</a></li>
<li><a class="reference internal" href="#yum-and-rpm">yum and rpm</a></li>
<li><a class="reference internal" href="#init-bootup">init bootup</a></li>
<li><a class="reference internal" href="#grub">grub</a></li>
<li><a class="reference internal" href="#mountall">mountall</a></li>
<li><a class="reference internal" href="#enter-text-interface">enter text interface</a></li>
<li><a class="reference internal" href="#no-lock-screen">no lock screen</a></li>
<li><a class="reference internal" href="#config-boot">config boot</a></li>
<li><a class="reference internal" href="#redhat">redhat</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../Target.html"
                        title="previous chapter">框架</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Stage_2.html"
                        title="next chapter">内核篇</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/content/Stage_1.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Stage_2.html" title="内核篇"
             >next</a> |</li>
        <li class="right" >
          <a href="../Target.html" title="框架"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">My Linux 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, gangwei.li.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>